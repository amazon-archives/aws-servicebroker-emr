version: 1.0
name: emr-apb
description: 'Managed Hadoop cluster in the cloud with just a few clicks.'
tags:
  - amazon
  - emr
bindable: true
async: optional
metadata:
  displayName: "Amazon EMR"
  imageUrl: "https://s3.amazonaws.com/thp-aws-icons-dev/Analytics_AmazonEMR_LARGE.png"
  longDescription: "Amazon Elastic Map reduce (Amazon EMR) provides a managed Hadoop framework that makes it easy, fast, and cost-effective to process vast amounts of data across dynamically scalable Amazon EC2 instances."
  documentationUrl: "https://aws.amazon.com/emr/"
plans:
  - name: emr
    description: 'EMR Cluster'
    free: false
    metadata:
      displayName: Standard EMR
      longDescription: "Amazon EMR is a web service that makes it easy to process large amounts of data efficiently. Amazon EMR uses Hadoop processing combined with several AWS products to do such tasks as web indexing, data mining, log file analysis, machine learning, scientific simulation, and data warehousing."
      cost: $0.00
    parameters:
      ###############
      # AWS Account Information
      ###############
      - name: aws_access_key
        required: true
        title: AWS Access Key
        description: 'AWS Access Key to authenticate to AWS with.'
        type: string
        display_group: AWS Account Information
      - name: aws_secret_key
        required: true
        title: AWS Secret Key
        description: 'AWS Secret Key to authenticate to AWS with.'
        type: string
        display_group: AWS Account Information
      - name: aws_cloudformation_role_arn
        required: true
        title: AWS Cloudformation role ARN
        description: 'IAM role ARN for use as Cloudformation Stack Role.'
        type: string
        display_group: AWS Account Information
      - name: KeyName
        required: true
        title: EC2 Key Pair
        description: 'Key Pair for SSH access to cluster'
        type: string
        default: "MyKeyPair"
        display_group: AWS Account Information
      - name: region
        required: true
        title: AWS Region
        description: 'AWS Region to create EMR Cluster in.'
        type: enum
        enum:
          - ap-northeast-1
          - ap-northeast-2
          - ap-south-1
          - ap-southeast-1
          - ap-southeast-2
          - ca-central-1
          - eu-central-1
          - eu-west-1
          - eu-west-2
          - sa-east-1
          - us-east-1
          - us-east-2
          - us-west-1
          - us-west-2
        default: "us-west-2"
      ###############
      # EMR Settings
      ###############
      - name: EMRApplication
        required: true
        title: EMR Application
        description: 'EMR Cluster Application to be installed'
        type: enum
        enum:
          - Spark
          - Hbase
        default: Spark
        display_group: EMR Settings
      - name: EMRClusterName
        required: true
        title: EMR Cluster Name
        description: 'Name of the cluster'
        type: string
        default: "EMRCluster1"
        display_group: EMR Settings
      - name: ReleaseLabel
        required: true
        title: Version of EMR to be used
        description: 'EMR release'
        type: enum
        enum:
          - emr-5.8.0
          - emr-5.7.0
          - emr-5.6.0
          - emr-5.5.0
        default: "emr-5.7.0"
        display_group: EMR Settings
      ###############
      # Cluster Sizing
      ###############
      - name: MasterInstanceType
        required: true
        title: Master Instance Type
        description: 'EC2 instance type for Master Node'
        type: enum
        enum:
          - m4.2xlarge
          - m4.large
          - m4.xlarge
          - m4.4xlarge
          - m4.10xlarge
          - m4.16xlarge
          - m3.xlarge
          - m3.2xlarge
          - c3.xlarge
          - c3.2xlarge
          - c3.4xlarge
          - c3.8xlarge
          - c4.large
          - c4.xlarge
          - c4.2xlarge
          - c4.4xlarge
          - c4.8xlarge
          - d2.xlarge
          - d2.2xlarge
          - d2.4xlarge
          - d2.8xlarge
          - r4.xlarge
          - r4.2xlarge
          - r4.4xlarge
          - r4.8xlarge
          - r4.16xlarge
        default: "m4.xlarge"
        display_group: Cluster Sizing
      - name: CoreInstanceType
        required: true
        title: Core Instance Type
        description: 'EC2 instance type for Core Nodes'
        type: enum
        enum:
          - m4.2xlarge
          - m4.large
          - m4.xlarge
          - m4.4xlarge
          - m4.10xlarge
          - m4.16xlarge
          - m3.xlarge
          - m3.2xlarge
          - c3.xlarge
          - c3.2xlarge
          - c3.4xlarge
          - c3.8xlarge
          - c4.large
          - c4.xlarge
          - c4.2xlarge
          - c4.4xlarge
          - c4.8xlarge
          - d2.xlarge
          - d2.2xlarge
          - d2.4xlarge
          - d2.8xlarge
          - r4.xlarge
          - r4.2xlarge
          - r4.4xlarge
          - r4.8xlarge
          - r4.16xlarge
        default: m4.xlarge
        display_group: Cluster Sizing
      - name: NumberOfCoreInstances
        required: true
        title: Number of Core Nodes
        description: 'The number of core nodes to be launched'
        type: int
        default: 2
        display_group: Cluster Sizing
      ###############
      # Network Settings
      ###############
      - name: VpcId
        required: true
        title: VPC ID
        description: 'VPC to place EMR subnet into'
        type: string
        display_group: Network Settings
      - name: EMRCidr
        required: true
        title: EMR CIDR Range
        description: 'CIDR Range to use for EMR cluster subnet'
        type: string
        display_group: Network Settings